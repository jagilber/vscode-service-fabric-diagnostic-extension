{
  "id": "sf-vscode-extension-architecture",
  "title": "Service Fabric VSCode Extension Architecture",
  "body": "This VSCode extension provides Service Fabric cluster management and diagnostic capabilities.\n\n## Core Modules\n\n### Primary Components\n- **sfMgr.ts**: Main manager class coordinating all SF operations\n  - Cluster management and Azure integration\n  - Handles Azure SDK v5+ packages (@azure/arm-servicefabric, @azure/servicefabric)\n  - Uses ClientSecretCredential for authentication\n  - Manages logging via  AzureLogger\n\n- **sfConfiguration.ts**: Cluster configuration management\n  - Manifest parsing (XML/JSON conversion)\n  - Node, application, and service tracking\n  - Certificate and endpoint management\n  - Cluster state management with TreeItem hierarchy\n\n- **sfRest.ts / sfRestClient.ts**: REST API communication\n  - Raw HTTP/HTTPS requests with certificate authentication\n  - Supports both local (http://localhost:19080) and secured clusters\n  - Common endpoints: /$/GetClusterHealth, /$/GetApplicationTypes, /Nodes\n\n- **serviceFabricClusterView.ts**: Main cluster view component\n  - TreeDataProvider implementation\n  - Hierarchy: Cluster → Applications/Nodes/System → Services\n  - Updates via onDidChangeTreeData event\n\n- **sfClusterExplorer.ts**: TreeView provider for cluster visualization\n\n- **sfPs.ts**: PowerShell integration for local cluster operations\n  - Executes DevClusterSetup.ps1 for local development\n\n### Support Modules\n- **sfPrompts.ts**: User input prompts for cluster endpoints and operations\n- **sfExtSecrets.ts**: Secure credential management using VSCode SecretStorage API\n- **sfExtSettings.ts**: Extension settings management\n- **sfUtility.ts**: Utility functions including SfUtility.outputLog()\n\n## Constants (sfConstants.ts)\n```typescript\nSF_SDK_DIR = 'C:\\\\Program Files\\\\Microsoft SDKs\\\\Service Fabric\\\\ClusterSetup'\nSF_DEV_CLUSTER_SETUP = '${SF_SDK_DIR}\\\\DevClusterSetup.ps1'\nSF_HTTP_GATEWAY_PORT = 19080\nSF_HTTP_GATEWAY_ENDPOINT = 'http://localhost:19080'\n```\n\n## Logging Pattern\n```typescript\nsetLogLevel('verbose');\nAzureLogger.log = (...args) => {\n  SfUtility.outputLog(args.join(' '));\n};\n```\n\nAlways use SfUtility.outputLog() for consistent diagnostic output.",
  "priority": 0,
  "audience": "agent",
  "requirement": "always",
  "rationale": "Provides essential context about the extension's architecture for code navigation and modifications",
  "categories": ["architecture", "service-fabric", "vscode-extension"]
}