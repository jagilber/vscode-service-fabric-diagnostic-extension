/** * Context Menu Actions Tests * Verifies new replica, service, application, and application type context menu actions */import * as vscode from 'vscode';import * as assert from 'assert';describe('Context Menu Actions - Command Registration', () => {    test('should register all new context menu commands', async () => {        const allCommands = await vscode.commands.getCommands(true);                const newCommands = [            'sfClusterExplorer.restartReplica',            'sfClusterExplorer.deleteReplica',            'sfClusterExplorer.deleteService',            'sfClusterExplorer.deleteApplication',            'sfClusterExplorer.unprovisionApplicationType'        ];        const missingCommands: string[] = [];        for (const cmd of newCommands) {            if (!allCommands.includes(cmd)) {                missingCommands.push(cmd);            }        }        assert.strictEqual(            missingCommands.length,            0,            `Missing commands: ${missingCommands.join(', ')}`        );    });    test('all new commands should be executable', async () => {        const commands = [            'sfClusterExplorer.restartReplica',            'sfClusterExplorer.deleteReplica',            'sfClusterExplorer.deleteService',            'sfClusterExplorer.deleteApplication',            'sfClusterExplorer.unprovisionApplicationType'        ];        for (const cmd of commands) {            try {                await vscode.commands.executeCommand(cmd);            } catch (error: any) {                assert.ok(                    !error.message?.includes('not found') && !error.message?.includes('not registered'),                    `Command '${cmd}' is not registered: ${error.message}`                );            }        }    });});describe('Context Menu Actions - Package.json Configuration', () => {    test('menu items should have correct viewItem context', async () => {        const menuConfigs = [            { command: 'sfClusterExplorer.restartReplica', viewItem: 'replica' },            { command: 'sfClusterExplorer.deleteReplica', viewItem: 'replica' },            { command: 'sfClusterExplorer.deleteService', viewItem: 'service' },            { command: 'sfClusterExplorer.deleteApplication', viewItem: 'application' },            { command: 'sfClusterExplorer.unprovisionApplicationType', viewItem: 'application' }        ];        const allCommands = await vscode.commands.getCommands(true);        const packageJson = require('../../package.json');                for (const { command, viewItem } of menuConfigs) {            assert.ok(                allCommands.includes(command),                `Command ${command} should be registered`            );                        const commandDef = packageJson.contributes.commands.find((c: any) => c.command === command);            assert.ok(commandDef, `Command ${command} should be in package.json commands`);                        const menuItem = packageJson.contributes.menus['view/item/context'].find(                (m: any) => m.command === command            );            assert.ok(menuItem, `Menu item for ${command} should be in package.json`);            assert.ok(                menuItem.when.includes(`viewItem == ${viewItem}`),                `Menu item for ${command} should have viewItem == ${viewItem}`            );        }    });});